{"version":3,"file":"static/js/357.201d12bb.chunk.js","mappings":"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","sources":["pages/merge/code.ts","pages/merge/Example.tsx","pages/merge/index.tsx","utils/useTheme.tsx","../../merge/esm/store.js","../../merge/esm/Original.js","../../merge/esm/Modified.js","../../merge/esm/Internal.js","../../merge/esm/index.js"],"sourcesContent":["export const originalCode = `// The player has a position, a size, and a current speed.\nclass Player {\n  size = new Vec(0.8, 1.5);\n\n  constructor(pos, speed) {\n    this.pos = pos;\n    this.speed = speed;\n  }\n\n  static create(pos) {\n    return new Player(pos.plus(new Vec(0, -0.5)), new Vec(0, 0));\n  }\n}\n\n// Lava block. When you touch it, you die.\nclass Lava {\n  size = new Vec(1, 1)\n\n  constructor(pos, speed, reset) {\n    this.pos = pos;\n    this.speed = speed;\n    this.reset = reset;\n  }\n\n  static horizontal(pos) {\n    return new Lava(pos, new Vec(2, 0));\n  }\n\n  static vertical(pos) {\n    return new Lava(pos, new Vec(0, 2));\n  }\n\n  static drip(pos) {\n    return new Lava(pos, new Vec(0, 3), pos);\n  }\n}\n`;\n\nexport const modifiedCode = `class Player {\n  get type() { return \"player\" }\n\n  constructor(pos, speed) {\n    this.pos = pos;\n    this.speed = speed;\n  }\n\n  static create(pos) {\n    return new Player(pos.plus(new Vec(0, -0.5)), new Vec(0, 0));\n  }\n}\n\nclass Lava {\n  constructor(pos, speed, reset) {\n    this.pos = pos;\n    this.speed = speed;\n    this.reset = reset;\n  }\n\n  get type() { return \"lava\"; }\n\n  static create(pos, ch) {\n    if (ch == \"=\") {\n      return new Lava(pos, new Vec(2, 0));\n    } else if (ch == \"|\") {\n      return new Lava(pos, new Vec(0, 2));\n    } else if (ch == \"v\") {\n      return new Lava(pos, new Vec(0, 3), pos);\n    }\n  }\n}\n\nPlayer.prototype.size = new Vec(0.8, 1.5);\nLava.prototype.size = new Vec(1, 1);\n`;\n","import { Fragment, useRef, useState } from 'react';\nimport CodeMirrorMerge, { CodeMirrorMergeProps } from 'react-codemirror-merge';\nimport { EditorView } from 'codemirror';\nimport { EditorState } from '@codemirror/state';\nimport { langs } from '@uiw/codemirror-extensions-langs';\nimport { originalCode, modifiedCode } from './code';\nimport { useTheme } from '../../utils/useTheme';\n\nconst Original = CodeMirrorMerge.Original;\nconst Modified = CodeMirrorMerge.Modified;\n\nexport const MergeExample = () => {\n  const [orientation, setOrientation] = useState<CodeMirrorMergeProps['orientation']>('a-b');\n  const [revertControls, setRevertControls] = useState<CodeMirrorMergeProps['revertControls']>();\n  const [highlightChanges, setHighlightChanges] = useState<CodeMirrorMergeProps['highlightChanges']>(true);\n  const [gutter, setGutter] = useState<CodeMirrorMergeProps['gutter']>(true);\n  const [collapseUnchanged, setCollapseUnchanged] = useState<CodeMirrorMergeProps['collapseUnchanged']>({});\n  const { theme } = useTheme();\n  const handleOrientation = (evn: React.ChangeEvent<HTMLSelectElement>) => {\n    setOrientation(evn.target.value as CodeMirrorMergeProps['orientation']);\n  };\n  const [originalValue, setOriginalValue] = useState(originalCode);\n  const random = useRef<number>();\n  const click = () => {\n    random.current = Math.floor(Math.random() * 101);\n    const code = '// hello world' + random.current + '\\n' + originalCode;\n    setOriginalValue(code);\n  };\n  return (\n    <Fragment>\n      <button onClick={click}>Change Original Value {random.current}</button>\n      <CodeMirrorMerge\n        orientation={orientation}\n        revertControls={revertControls}\n        collapseUnchanged={collapseUnchanged}\n        highlightChanges={highlightChanges}\n        gutter={gutter}\n        style={{ height: 300, overflow: 'auto' }}\n        theme={theme}\n      >\n        <Original\n          value={originalValue}\n          extensions={[langs.javascript()]}\n          onChange={(val) => {\n            // console.log('::::::::::', val)\n          }}\n        />\n        <Modified\n          value={modifiedCode}\n          extensions={[langs.javascript(), EditorView.editable.of(false), EditorState.readOnly.of(true)]}\n        />\n      </CodeMirrorMerge>\n      <label>\n        Orientation\n        <select onChange={handleOrientation} defaultValue={orientation}>\n          <option value=\"\">please orientation choose</option>\n          <option value=\"a-b\">a-b</option>\n          <option value=\"b-a\">b-a</option>\n        </select>\n      </label>\n      <br />\n      <label>\n        Revert buttons\n        <select\n          defaultValue={revertControls}\n          onChange={(evn) => setRevertControls(evn.target.value as CodeMirrorMergeProps['revertControls'])}\n        >\n          <option value=\"\">please revertControls choose</option>\n          <option value=\"a-to-b\">a-to-b</option>\n          <option value=\"b-to-a\">b-to-a</option>\n        </select>\n      </label>\n      <br />\n      <label>\n        Highlight changes\n        <input\n          type=\"checkbox\"\n          checked={!!highlightChanges}\n          onChange={(evn) => setHighlightChanges(evn.target.checked)}\n        />\n      </label>\n      <br />\n      <label>\n        Gutter markers\n        <input type=\"checkbox\" checked={!!gutter} onChange={(evn) => setGutter(evn.target.checked)} />\n      </label>\n      <label>\n        Collapse unchanged code\n        <input\n          type=\"checkbox\"\n          checked={!!collapseUnchanged}\n          onChange={(evn) => setCollapseUnchanged(evn.target.checked ? {} : undefined)}\n        />\n      </label>\n    </Fragment>\n  );\n};\n","import { Preview } from '../theme/Preview';\nimport { MergeExample } from './Example';\n\nexport const Component = () => {\n  return (\n    <Preview path={() => import('react-codemirror-merge/README.md')}>\n      <MergeExample />\n    </Preview>\n  );\n};\n","import { useEffect, useState } from 'react';\nimport { ReactCodeMirrorProps } from '@uiw/react-codemirror';\n\nexport function useTheme(name: ReactCodeMirrorProps['theme'] = 'light') {\n  const dark = document.documentElement.getAttribute('data-color-mode');\n  const [theme, setTheme] = useState<ReactCodeMirrorProps['theme']>(dark === 'dark' ? 'dark' : name);\n  useEffect(() => {\n    setTheme(document.documentElement.getAttribute('data-color-mode') === 'dark' ? 'dark' : 'light');\n    document.addEventListener('colorschemechange', (e) => {\n      setTheme(e.detail.colorScheme as ReactCodeMirrorProps['theme']);\n    });\n  }, []);\n  return { theme, setTheme };\n}\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport React, { createContext, useContext, useEffect, useReducer } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var initialState = {\n  modified: {\n    doc: ''\n  },\n  original: {\n    doc: ''\n  }\n};\nexport var Context = /*#__PURE__*/createContext(initialState);\nexport function reducer(state, action) {\n  return _extends({}, state, action, {\n    modified: _extends({}, state.modified, action.modified),\n    original: _extends({}, state.original, action.original)\n  });\n}\nexport var useStore = () => {\n  return useContext(Context);\n};\nexport var Provider = _ref => {\n  var {\n    children,\n    theme\n  } = _ref;\n  var [state, dispatch] = useReducer(reducer, _extends({}, initialState, {\n    theme\n  }));\n  useEffect(() => dispatch({\n    theme\n  }), [theme]);\n  return /*#__PURE__*/_jsx(Context.Provider, {\n    value: _extends({}, state, {\n      dispatch\n    }),\n    children: children\n  });\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"extensions\", \"value\", \"selection\", \"onChange\"];\nimport { useEffect } from 'react';\nimport { getDefaultExtensions } from '@uiw/react-codemirror';\nimport { useStore } from './store';\nexport var Original = props => {\n  var {\n      extensions = [],\n      value,\n      selection,\n      onChange\n    } = props,\n    otherOption = _objectWithoutPropertiesLoose(props, _excluded);\n  var {\n    theme,\n    dispatch\n  } = useStore();\n  var defaultExtensions = getDefaultExtensions(_extends({}, otherOption, {\n    theme\n  }));\n  useEffect(() => dispatch({\n    original: {\n      doc: value,\n      selection: selection,\n      extensions: [...defaultExtensions, ...extensions]\n    },\n    originalExtension: {\n      onChange,\n      option: otherOption,\n      extension: [extensions]\n    }\n  }), [props]);\n  return null;\n};\nOriginal.displayName = 'CodeMirrorMerge.Original';","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"extensions\", \"value\", \"selection\", \"onChange\"];\nimport { useEffect } from 'react';\nimport { getDefaultExtensions } from '@uiw/react-codemirror';\nimport { useStore } from './store';\nexport var Modified = props => {\n  var {\n      extensions = [],\n      value,\n      selection,\n      onChange\n    } = props,\n    otherOption = _objectWithoutPropertiesLoose(props, _excluded);\n  var {\n    theme,\n    dispatch\n  } = useStore();\n  var defaultExtensions = getDefaultExtensions(_extends({}, otherOption, {\n    theme\n  }));\n  useEffect(() => {\n    dispatch({\n      modified: {\n        doc: value,\n        selection: selection,\n        extensions: [...defaultExtensions, ...extensions]\n      },\n      modifiedExtension: {\n        onChange,\n        option: otherOption,\n        extension: [extensions]\n      }\n    });\n  }, [props]);\n  return null;\n};\nModified.displayName = 'CodeMirrorMerge.Modified';","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"children\", \"orientation\", \"revertControls\", \"highlightChanges\", \"gutter\", \"collapseUnchanged\", \"destroyRerender\", \"renderRevertControl\"],\n  _excluded2 = [\"modified\", \"modifiedExtension\", \"original\", \"originalExtension\", \"theme\", \"dispatch\"];\nimport React, { useEffect, useImperativeHandle, useRef } from 'react';\nimport { getDefaultExtensions } from '@uiw/react-codemirror';\nimport { MergeView } from '@codemirror/merge';\nimport { useStore } from './store';\nimport { EditorView } from '@codemirror/view';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var Internal = /*#__PURE__*/React.forwardRef((props, ref) => {\n  var {\n      className,\n      children,\n      orientation,\n      revertControls,\n      highlightChanges,\n      gutter,\n      collapseUnchanged,\n      destroyRerender = true,\n      renderRevertControl\n    } = props,\n    elmProps = _objectWithoutPropertiesLoose(props, _excluded);\n  var _useStore = useStore(),\n    {\n      modified,\n      modifiedExtension,\n      original,\n      originalExtension,\n      theme,\n      dispatch\n    } = _useStore,\n    otherStore = _objectWithoutPropertiesLoose(_useStore, _excluded2);\n  var editor = useRef(null);\n  var view = useRef();\n  var opts = {\n    orientation,\n    revertControls,\n    highlightChanges,\n    gutter,\n    collapseUnchanged,\n    renderRevertControl\n  };\n  useImperativeHandle(ref, () => ({\n    container: editor.current,\n    view: view.current,\n    modified,\n    original,\n    config: _extends({\n      a: original,\n      b: modified,\n      parent: editor.current\n    }, opts)\n  }), [editor, view, modified, original, opts]);\n  var originalUpdateListener = EditorView.updateListener.of(vu => {\n    if (vu.docChanged && typeof (originalExtension == null ? void 0 : originalExtension.onChange) === 'function') {\n      var doc = vu.state.doc;\n      var val = doc.toString();\n      originalExtension == null || originalExtension.onChange(val, vu);\n    }\n  });\n  var modifiedUpdateListener = EditorView.updateListener.of(vu => {\n    if (vu.docChanged && typeof (modifiedExtension == null ? void 0 : modifiedExtension.onChange) === 'function') {\n      var doc = vu.state.doc;\n      var val = doc.toString();\n      modifiedExtension == null || modifiedExtension.onChange(val, vu);\n    }\n  });\n  useEffect(() => {\n    if (!view.current && editor.current && originalExtension && modifiedExtension) {\n      view.current = new MergeView(_extends({\n        a: _extends({}, original, {\n          extensions: [...((originalExtension == null ? void 0 : originalExtension.extension) || []), ...getDefaultExtensions(_extends({}, originalExtension == null ? void 0 : originalExtension.option, {\n            theme\n          })), originalUpdateListener]\n        }),\n        b: _extends({}, modified, {\n          extensions: [...((modifiedExtension == null ? void 0 : modifiedExtension.extension) || []), ...getDefaultExtensions(_extends({}, modifiedExtension == null ? void 0 : modifiedExtension.option, {\n            theme\n          })), modifiedUpdateListener]\n        }),\n        parent: editor.current\n      }, opts));\n      dispatch({\n        view: view.current\n      });\n    }\n  }, [view, editor, originalExtension, modifiedExtension]);\n  useEffect(() => {\n    if (original && original.doc && view.current) {\n      var _view$current;\n      var originalDoc = (_view$current = view.current) == null ? void 0 : _view$current.a.state.doc.toString();\n      if (originalDoc !== original.doc) {\n        var _view$current2;\n        (_view$current2 = view.current) == null || _view$current2.a.dispatch({\n          changes: {\n            from: 0,\n            to: originalDoc.length,\n            insert: original.doc || ''\n          }\n          // effects: StateEffect.reconfigure.of([\n          //   ...(originalExtension?.extension || []),\n          //   ...getDefaultExtensions({ ...originalExtension?.option, theme }),\n          // ])\n        });\n      }\n    }\n    if (modified && modified.doc && view.current) {\n      var _view$current3;\n      var modifiedDoc = (_view$current3 = view.current) == null ? void 0 : _view$current3.b.state.doc.toString();\n      if (modifiedDoc !== modified.doc) {\n        var _view$current4;\n        (_view$current4 = view.current) == null || _view$current4.b.dispatch({\n          changes: {\n            from: 0,\n            to: modifiedDoc.length,\n            insert: modified.doc || ''\n          }\n          // effects: StateEffect.reconfigure.of([\n          //   ...(modifiedExtension?.extension || []),\n          //   ...getDefaultExtensions({ ...modifiedExtension?.option, theme }),\n          // ])\n        });\n      }\n    }\n    if (destroyRerender && view.current) {\n      var originalFrom = view.current.a.state.selection.ranges[0].from;\n      var modifiedFrom = view.current.b.state.selection.ranges[0].from;\n      view.current.destroy();\n      view.current = new MergeView(_extends({\n        a: _extends({}, original, {\n          extensions: [...((originalExtension == null ? void 0 : originalExtension.extension) || []), ...getDefaultExtensions(_extends({}, originalExtension == null ? void 0 : originalExtension.option, {\n            theme\n          }))]\n        }),\n        b: _extends({}, modified, {\n          extensions: [...((modifiedExtension == null ? void 0 : modifiedExtension.extension) || []), ...getDefaultExtensions(_extends({}, modifiedExtension == null ? void 0 : modifiedExtension.option, {\n            theme\n          }))]\n        }),\n        parent: editor.current\n      }, opts));\n      if (originalFrom) {\n        view.current.a.focus();\n        view.current.a.dispatch({\n          selection: {\n            anchor: originalFrom,\n            head: originalFrom\n          }\n        });\n      }\n      if (modifiedFrom) {\n        view.current.b.focus();\n        view.current.b.dispatch({\n          selection: {\n            anchor: modifiedFrom,\n            head: modifiedFrom\n          }\n        });\n      }\n    }\n  }, [view, theme, editor.current, original, modified, originalExtension, modifiedExtension, destroyRerender]);\n  useEffect(() => () => view.current && view.current.destroy(), []);\n  useEffect(() => {\n    if (view.current) {\n      var _opts = {};\n      if (otherStore.orientation !== orientation) {\n        _opts.orientation = orientation;\n      }\n      if (otherStore.revertControls !== revertControls) {\n        _opts.revertControls = revertControls;\n      }\n      if (otherStore.highlightChanges !== highlightChanges) {\n        _opts.highlightChanges = highlightChanges;\n      }\n      if (otherStore.gutter !== gutter) {\n        _opts.gutter = gutter;\n      }\n      if (otherStore.collapseUnchanged !== collapseUnchanged) {\n        _opts.collapseUnchanged = collapseUnchanged;\n      }\n      if (otherStore.renderRevertControl !== renderRevertControl) {\n        _opts.collapseUnchanged = collapseUnchanged;\n      }\n      if (Object.keys(_opts).length && dispatch && view.current) {\n        view.current.reconfigure(_extends({}, _opts));\n        dispatch(_extends({}, _opts));\n      }\n    }\n  }, [dispatch, view, orientation, revertControls, highlightChanges, gutter, collapseUnchanged, renderRevertControl]);\n  var defaultClassNames = 'cm-merge-theme';\n  return /*#__PURE__*/_jsx(\"div\", _extends({\n    ref: editor,\n    className: \"\" + defaultClassNames + (className ? \" \" + className : '')\n  }, elmProps, {\n    children: children\n  }));\n});\nInternal.displayName = 'CodeMirrorMerge.Internal';","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nvar _excluded = [\"theme\"];\nimport React from 'react';\nimport { Original } from './Original';\nimport { Modified } from './Modified';\nimport { Internal } from './Internal';\nimport { Provider } from './store';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar InternalCodeMirror = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  var {\n      theme\n    } = _ref,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  return /*#__PURE__*/_jsx(Provider, {\n    theme: theme,\n    children: /*#__PURE__*/_jsx(Internal, _extends({}, props, {\n      ref: ref\n    }))\n  });\n});\nvar CodeMirrorMerge = InternalCodeMirror;\nCodeMirrorMerge.Original = Original;\nCodeMirrorMerge.Modified = Modified;\nCodeMirrorMerge.displayName = 'CodeMirrorMerge';\nexport default CodeMirrorMerge;"],"names":["originalCode","Original","CodeMirrorMerge","Modified","MergeExample","orientation","setOrientation","useState","revertControls","setRevertControls","highlightChanges","setHighlightChanges","gutter","setGutter","collapseUnchanged","setCollapseUnchanged","theme","useTheme","originalValue","setOriginalValue","random","useRef","_jsxs","Fragment","children","onClick","click","current","Math","floor","code","style","height","overflow","_jsx","value","extensions","langs","javascript","onChange","val","EditorView","editable","of","EditorState","readOnly","evn","target","defaultValue","type","checked","undefined","Component","Preview","path","name","arguments","length","dark","document","documentElement","getAttribute","setTheme","useEffect","addEventListener","e","detail","colorScheme","initialState","modified","doc","original","Context","createContext","reducer","state","action","_extends","useStore","useContext","Provider","_ref","dispatch","useReducer","_excluded","props","selection","otherOption","_objectWithoutPropertiesLoose","defaultExtensions","getDefaultExtensions","originalExtension","option","extension","displayName","modifiedExtension","_excluded2","Internal","React","ref","className","destroyRerender","renderRevertControl","elmProps","_useStore","otherStore","editor","view","opts","useImperativeHandle","container","config","a","b","parent","originalUpdateListener","updateListener","vu","docChanged","toString","modifiedUpdateListener","MergeView","_view$current","_view$current2","originalDoc","changes","from","to","insert","_view$current3","_view$current4","modifiedDoc","originalFrom","ranges","modifiedFrom","destroy","focus","anchor","head","_opts","Object","keys","reconfigure"],"sourceRoot":""}