"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[1122],{41122:(e,n,t)=>{t.r(n),t.d(n,{Component:()=>f});var r=t(80905),o=t(67538),i=t(8070),s=t(27406),a=t(98557);const l=s.default.Original,d=s.default.Modified;let c="one\ntwo\nthree\nfour\nfive";const u=o.Z9.fromClass(class{update(e){e.docChanged&&console.log("Document changed! test 1")}}),h=o.Z9.fromClass(class{update(e){e.docChanged&&console.log("Document changed! test 2")}});function f(){return(0,a.jsx)(r.Fragment,{children:(0,a.jsx)(g,{})})}function g(){const[e,n]=(0,r.useState)(c),[t,o]=(0,r.useState)(c),f=(0,r.useRef)(null);return(0,a.jsxs)("div",{style:{width:"100%"},children:[(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:()=>{var e,n;null===(e=f.current)||void 0===e||null===(n=e.view)||void 0===n||n.a.dispatch({effects:i.Pe.appendConfig.of([h])})},children:"Add extension 2"})}),(0,a.jsxs)(s.default,{ref:f,destroyRerender:!1,children:[(0,a.jsx)(l,{value:e,extensions:[u],onChange:e=>{n(e)}}),(0,a.jsx)(d,{value:t,onChange:e=>{o(e)}})]}),(0,a.jsxs)("div",{style:{display:"flex",marginTop:10},children:[(0,a.jsxs)("pre",{style:{flex:1},children:[e," "]}),(0,a.jsxs)("pre",{style:{backgroundColor:"#fff",flex:1},children:[t," "]})]})]})}},27406:(e,n,t)=>{t.r(n),t.d(n,{default:()=>b});var r=t(68102),o=t(49257),i=t(80905),s=t(73562),a=t(98557),l={modified:{doc:""},original:{doc:""}},d=(0,i.createContext)(l);function c(e,n){return(0,r.A)({},e,n,{modified:(0,r.A)({},e.modified,n.modified),original:(0,r.A)({},e.original,n.original)})}var u=()=>(0,i.useContext)(d),h=e=>{var{children:n,theme:t}=e,[o,s]=(0,i.useReducer)(c,(0,r.A)({},l,{theme:t}));return(0,i.useEffect)((()=>s({theme:t})),[t]),(0,a.jsx)(d.Provider,{value:(0,r.A)({},o,{dispatch:s}),children:n})},f=["extensions","value","selection","onChange"],g=e=>{var{extensions:n=[],value:t,selection:a,onChange:l}=e,d=(0,o.A)(e,f),{theme:c,dispatch:h}=u(),g=(0,s.IA)((0,r.A)({},d,{theme:c}));return(0,i.useEffect)((()=>h({original:{doc:t,selection:a,extensions:[...g,...n]},originalExtension:{onChange:l,option:d,extension:[n]}})),[e]),null};g.displayName="CodeMirrorMerge.Original";var v=["extensions","value","selection","onChange"],m=e=>{var{extensions:n=[],value:t,selection:a,onChange:l}=e,d=(0,o.A)(e,v),{theme:c,dispatch:h}=u(),f=(0,s.IA)((0,r.A)({},d,{theme:c}));return(0,i.useEffect)((()=>{h({modified:{doc:t,selection:a,extensions:[...f,...n]},modifiedExtension:{onChange:l,option:d,extension:[n]}})}),[e]),null};m.displayName="CodeMirrorMerge.Modified";var p=t(60125),x=t(67538),C=["className","children","orientation","revertControls","highlightChanges","gutter","collapseUnchanged","destroyRerender","renderRevertControl"],A=["modified","modifiedExtension","original","originalExtension","theme","dispatch"],w=i.forwardRef(((e,n)=>{var{className:t,children:l,orientation:d,revertControls:c,highlightChanges:h,gutter:f,collapseUnchanged:g,destroyRerender:v=!0,renderRevertControl:m}=e,w=(0,o.A)(e,C),y=u(),{modified:j,modifiedExtension:b,original:E,originalExtension:R,theme:M,dispatch:I}=y,S=(0,o.A)(y,A),k=(0,i.useRef)(null),N=(0,i.useRef)(),U={orientation:d,revertControls:c,highlightChanges:h,gutter:f,collapseUnchanged:g,renderRevertControl:m};(0,i.useImperativeHandle)(n,(()=>({container:k.current,view:N.current,modified:j,original:E,config:(0,r.A)({a:E,b:j,parent:k.current},U)})),[k,N,j,E,U]);var L=x.Lz.updateListener.of((e=>{if(e.docChanged&&"function"===typeof(null==R?void 0:R.onChange)){var n=e.state.doc.toString();null==R||R.onChange(n,e)}})),O=x.Lz.updateListener.of((e=>{if(e.docChanged&&"function"===typeof(null==b?void 0:b.onChange)){var n=e.state.doc.toString();null==b||b.onChange(n,e)}}));(0,i.useEffect)((()=>{!N.current&&k.current&&R&&b&&(N.current=new p.SV((0,r.A)({a:(0,r.A)({},E,{extensions:[...(null==R?void 0:R.extension)||[],...(0,s.IA)((0,r.A)({},null==R?void 0:R.option,{theme:M})),L]}),b:(0,r.A)({},j,{extensions:[...(null==b?void 0:b.extension)||[],...(0,s.IA)((0,r.A)({},null==b?void 0:b.option,{theme:M})),O]}),parent:k.current},U)),I({view:N.current}))}),[N,k,R,b]),(0,i.useEffect)((()=>{if(E&&E.doc&&N.current){var e,n,t=null==(e=N.current)?void 0:e.a.state.doc.toString();if(t!==E.doc)null==(n=N.current)||n.a.dispatch({changes:{from:0,to:t.length,insert:E.doc||""}})}if(j&&j.doc&&N.current){var o,i,a=null==(o=N.current)?void 0:o.b.state.doc.toString();if(a!==j.doc)null==(i=N.current)||i.b.dispatch({changes:{from:0,to:a.length,insert:j.doc||""}})}if(v&&N.current){var l=N.current.a.state.selection.ranges[0].from,d=N.current.b.state.selection.ranges[0].from;N.current.destroy(),N.current=new p.SV((0,r.A)({a:(0,r.A)({},E,{extensions:[...(null==R?void 0:R.extension)||[],...(0,s.IA)((0,r.A)({},null==R?void 0:R.option,{theme:M}))]}),b:(0,r.A)({},j,{extensions:[...(null==b?void 0:b.extension)||[],...(0,s.IA)((0,r.A)({},null==b?void 0:b.option,{theme:M}))]}),parent:k.current},U)),l&&(N.current.a.focus(),N.current.a.dispatch({selection:{anchor:l,head:l}})),d&&(N.current.b.focus(),N.current.b.dispatch({selection:{anchor:d,head:d}}))}}),[N,M,k.current,E,j,R,b,v]),(0,i.useEffect)((()=>()=>N.current&&N.current.destroy()),[]),(0,i.useEffect)((()=>{if(N.current){var e={};S.orientation!==d&&(e.orientation=d),S.revertControls!==c&&(e.revertControls=c),S.highlightChanges!==h&&(e.highlightChanges=h),S.gutter!==f&&(e.gutter=f),S.collapseUnchanged!==g&&(e.collapseUnchanged=g),S.renderRevertControl!==m&&(e.collapseUnchanged=g),Object.keys(e).length&&I&&N.current&&(N.current.reconfigure((0,r.A)({},e)),I((0,r.A)({},e)))}}),[I,N,d,c,h,f,g,m]);return(0,a.jsx)("div",(0,r.A)({ref:k,className:"cm-merge-theme"+(t?" "+t:"")},w,{children:l}))}));w.displayName="CodeMirrorMerge.Internal";var y=["theme"],j=i.forwardRef(((e,n)=>{var{theme:t}=e,i=(0,o.A)(e,y);return(0,a.jsx)(h,{theme:t,children:(0,a.jsx)(w,(0,r.A)({},i,{ref:n}))})}));j.Original=g,j.Modified=m,j.displayName="CodeMirrorMerge";const b=j}}]);
//# sourceMappingURL=1122.b4a6aba6.chunk.js.map